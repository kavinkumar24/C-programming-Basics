from __future__ import unicode_literals
from argparse import Action
from cProfile import label
from fileinput import filename
from tkinter import Y
from tkinter.ttk import Style
from turtle import speed, title, width
from typing import Container
from urllib.request import urlopen
import requests
import streamlit as st
from streamlit_lottie import st_lottie
from pytube import YouTube
import urllib
import os
import speech_recognition as sr
import ffmpeg
import youtube_dl
import moviepy.editor as mp

with st.container():
    st.subheader('This webpage tells about web scrabbing by using AI')
    st.title('web extracting data in social media videos')
    


with st.container():
        url = st.text_input('The URL link')
        yt = YouTube(url)
    

with st.container():
    st.write("Title :", yt.title)
    # To get number of views
    st.write("Views :", yt.views)
    # To get the length of video
    st.write("Duration :", yt.length)
    # To get description
    st.write("Description :", yt.description)
    # To get ratings
    st.write("Ratings :", yt.rating)


if st.button('Download MP4'):
        stream = yt.streams.get_highest_resolution()
        stream.download(r"C:\Users\HP\Desktop")
        st.write("Download completed!!")

with st.container():
        if st.button('process'):
            stream = yt.streams.get_highest_resolution()
            stream.download(r"C:\Users\HP\Desktop")
            st.write("Download completed!!")

            st.write(rf'C:\Users\HP\Desktop\{yt.title}.mp4')
            clip = mp.VideoFileClip(rf'C:\Users\HP\Desktop\{yt.title}.wav')
            clip.audio.write_audiofile(yt.title+'.wav')
            
            r = sr.Recognizer()
            audio = sr.AudioFile(yt.title+'.wav')
            with audio as source:
                audio_file = r.record(source,duration=120)
            st.write(r.recognize_google(audio_file))











images for translator:
https://thumbs.dreamstime.com/b/dictionary-dictionary-study-translate-bilingual-english-background-book-117950458.jpg









